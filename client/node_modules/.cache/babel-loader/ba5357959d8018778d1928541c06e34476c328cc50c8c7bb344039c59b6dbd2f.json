{"ast":null,"code":"import { ENV } from \"../utils\";\nexport class Post {\n  constructor() {\n    this.baseApi = ENV.BASE_API;\n  }\n  async getPosts(accessToken, parameters) {\n    try {\n      const pageFilter = `page=${(parameters === null || parameters === void 0 ? void 0 : parameters.page) || 1}`;\n      const limitFilter = `limit=${(parameters === null || parameters === void 0 ? void 0 : parameters.limit) || 10}`;\n      const url = `${this.baseApi}/${ENV.API_ROUTES.POSTS}?${pageFilter}&${limitFilter}`;\n      const params = {\n        method: \"GET\",\n        headers: {\n          \"Authorization\": `Bearer ${accessToken}`\n        }\n      };\n      const response = await fetch(url, params);\n      const result = await response.json();\n      if (response.status !== 200) throw result;\n      return result;\n    } catch (error) {\n      throw error;\n    }\n  }\n  async deletePost(accessToken, idPost) {\n    try {\n      const url = `${this.baseApi}/${ENV.API_ROUTES.POST}/${idPost}`;\n      const params = {\n        method: \"DELETE\",\n        headers: {\n          Authorization: `Bearer ${accessToken}`\n        }\n      };\n      const response = await fetch(url, params);\n      const result = await response.json();\n      if (response.status !== 200) throw result;\n      return result;\n    } catch (error) {\n      throw error;\n    }\n  }\n  async createPost(accessToken, data) {\n    try {\n      const formData = new FormData();\n      Object.keys(data).forEach(key => {\n        formData.append(key, data[key]);\n        //console.log(key);\n      });\n\n      //console.log(data.fileAvatar);\n      if (data.file) {\n        formData.append(\"miniature\", data.file);\n      }\n\n      //console.log(data);\n\n      const url = `${this.baseApi}/${ENV.API_ROUTES.POST}`;\n      const params = {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${accessToken}`\n        },\n        body: formData\n      };\n      const response = await fetch(url, params);\n      const result = await response.json();\n      if (response.status !== 201) throw result;\n      return result;\n    } catch (error) {\n      throw error;\n    }\n  }\n  async updatePost(accessToken, idPost, data) {\n    try {\n      const formData = new FormData();\n      Object.keys(data).forEach(key => {\n        formData.append(key, data[key]);\n        //console.log(key);\n      });\n\n      //console.log(data.fileAvatar);\n      if (data.file) {\n        formData.append(\"miniature\", data.file);\n      }\n\n      //console.log(data);\n\n      const url = `${this.baseApi}/${ENV.API_ROUTES.POST}/${idPost}`;\n      const params = {\n        method: \"PATCH\",\n        headers: {\n          Authorization: `Bearer ${accessToken}`\n        },\n        body: formData\n      };\n      const response = await fetch(url, params);\n      const result = await response.json();\n      if (response.status !== 200) throw result;\n      return result;\n    } catch (error) {\n      throw error;\n    }\n  }\n}","map":{"version":3,"names":["ENV","Post","baseApi","BASE_API","getPosts","accessToken","parameters","pageFilter","page","limitFilter","limit","url","API_ROUTES","POSTS","params","method","headers","response","fetch","result","json","status","error","deletePost","idPost","POST","Authorization","createPost","data","formData","FormData","Object","keys","forEach","key","append","file","body","updatePost"],"sources":["C:/Treinamentos-LOCAL/2022-MERN-AN/Web-MERN/client/src/api/post.js"],"sourcesContent":["import { ENV } from \"../utils\";\r\n\r\nexport class Post {\r\n\r\n    baseApi = ENV.BASE_API;\r\n\r\n    async getPosts(accessToken, parameters) {\r\n        try {\r\n\r\n            const pageFilter = `page=${parameters?.page || 1}`;\r\n            const limitFilter = `limit=${parameters?.limit || 10}`;\r\n            const url = `${this.baseApi}/${ENV.API_ROUTES.POSTS}?${pageFilter}&${limitFilter}`;\r\n            const params = {\r\n                method: \"GET\",\r\n                headers: {\r\n                    \"Authorization\": `Bearer ${accessToken}`,\r\n                },\r\n            };\r\n\r\n            const response = await fetch(url, params);\r\n            const result = await response.json();\r\n\r\n            if (response.status !== 200) throw result;\r\n\r\n            return result;\r\n        } catch (error) {\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    async deletePost(accessToken, idPost){\r\n        try {\r\n           const url = `${this.baseApi}/${ENV.API_ROUTES.POST}/${idPost}`;\r\n           const params = {\r\n                method: \"DELETE\",\r\n                headers: {\r\n                    Authorization: `Bearer ${accessToken}`,\r\n                },\r\n           };\r\n\r\n           const response = await fetch(url, params);\r\n           const result = await response.json();\r\n\r\n           if(response.status !== 200) throw result;\r\n\r\n           return result;\r\n        } catch (error) {\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    async createPost(accessToken, data){\r\n        try {\r\n           const formData = new FormData();\r\n           Object.keys(data).forEach((key) => {\r\n               formData.append(key, data[key]);\r\n               //console.log(key);\r\n           });\r\n\r\n            //console.log(data.fileAvatar);\r\n            if (data.file) {\r\n                formData.append(\"miniature\", data.file);\r\n            }\r\n\r\n           //console.log(data);\r\n\r\n           const url = `${this.baseApi}/${ENV.API_ROUTES.POST}`;\r\n           const params = {\r\n                method: \"POST\",\r\n                headers: {\r\n                    Authorization: `Bearer ${accessToken}`,\r\n                },\r\n                body: formData,\r\n           };\r\n\r\n           const response = await fetch(url, params);\r\n\r\n           const result = await response.json();\r\n\r\n           if(response.status !== 201) throw result;\r\n\r\n           return result;\r\n\r\n\r\n        } catch (error) {\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    async updatePost(accessToken, idPost, data){\r\n        try {\r\n           const formData = new FormData();\r\n           Object.keys(data).forEach((key) => {\r\n               formData.append(key, data[key]);\r\n               //console.log(key);\r\n           });\r\n\r\n            //console.log(data.fileAvatar);\r\n            if (data.file) {\r\n                formData.append(\"miniature\", data.file);\r\n            }\r\n\r\n           //console.log(data);\r\n\r\n           const url = `${this.baseApi}/${ENV.API_ROUTES.POST}/${idPost}`;\r\n           const params = {\r\n                method: \"PATCH\",\r\n                headers: {\r\n                    Authorization: `Bearer ${accessToken}`,\r\n                },\r\n                body: formData,\r\n           };\r\n\r\n           const response = await fetch(url, params);\r\n           const result = await response.json();\r\n\r\n           if(response.status !== 200) throw result;\r\n\r\n           return result;\r\n        } catch (error) {\r\n            throw error;\r\n        }\r\n    }\r\n\r\n} "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}