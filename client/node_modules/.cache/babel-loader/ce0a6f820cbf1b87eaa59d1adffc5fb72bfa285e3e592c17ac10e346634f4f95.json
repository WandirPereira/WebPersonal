{"ast":null,"code":"import { ENV } from \"../utils\";\nexport class User {\n  constructor() {\n    this.baseApi = ENV.BASE_API;\n  }\n  async getMe(accessToken) {\n    try {\n      const url = `${this.baseApi}/${ENV.API_ROUTES.USER_ME}`;\n      const params = {\n        method: \"GET\",\n        headers: {\n          \"Authorization\": `Bearer ${accessToken}`\n        }\n      };\n      const response = await fetch(url, params);\n      const result = await response.json();\n\n      //console.log(response);\n      if (response.status !== 200) throw result;\n      return result;\n    } catch (error) {\n      throw error;\n    }\n  }\n  async createUser(accessToken, data) {\n    try {\n      const formData = new FormData();\n      Object.keys(data).forEach(key => {\n        formData.append(key, data[key]);\n        //console.log(key);\n      });\n\n      //console.log(data.fileAvatar);\n      if (data.fileAvatar) {\n        formData.append(\"avatar\", data.fileAvatar);\n      }\n\n      //console.log(data);\n\n      const url = `${this.baseApi}/${ENV.API_ROUTES.USER}`;\n      const params = {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${accessToken}`\n        },\n        body: formData\n      };\n      const response = await fetch(url, params);\n      const result = await response.json();\n      if (response.status !== 201) throw result;\n      return result;\n    } catch (error) {\n      throw error;\n    }\n  }\n  async getUsers(accessToken) {\n    let active = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n    try {\n      const url = `${this.baseApi}/${ENV.API_ROUTES.USERS}?active=${active}`;\n      const params = {\n        method: \"GET\",\n        headers: {\n          \"Authorization\": `Bearer ${accessToken}`\n        }\n      };\n      const response = await fetch(url, params);\n      const result = await response.json();\n      if (response.status !== 200) throw result;\n      return result;\n    } catch (error) {\n      throw error;\n    }\n  }\n  async deleteUser(accessToken, iduser) {\n    try {\n      const url = `${this.baseApi}/${ENV.API_ROUTES.USER}/${iduser}`;\n      const params = {\n        method: \"DELETE\",\n        headers: {\n          Authorization: `Bearer ${accessToken}`\n        }\n      };\n      const response = await fetch(url, params);\n      const result = await response.json();\n      if (response.status !== 200) throw result;\n      return result;\n    } catch (error) {\n      throw error;\n    }\n  }\n  async updateUser(accessToken, iduser, userData) {\n    try {\n      const data = userData;\n      if (!data.password) delete data.password; //se campo password n達o tem valor, delete o campo todo, n達o envie nada\n\n      const formData = new FormData();\n      Object.keys(data).forEach(key => {\n        formData.append(key, data[key]);\n        //console.log(key);\n      });\n\n      //console.log(data.fileAvatar);\n      if (data.fileAvatar) {\n        formData.append(\"avatar\", data.fileAvatar);\n      }\n\n      //console.log(data);\n\n      const url = `${this.baseApi}/${ENV.API_ROUTES.USER}/${iduser}`;\n      const params = {\n        method: \"PATCH\",\n        headers: {\n          Authorization: `Bearer ${accessToken}`\n        },\n        body: formData\n      };\n      const response = await fetch(url, params);\n      const result = await response.json();\n      if (response.status !== 200) throw result;\n      return result;\n    } catch (error) {\n      throw error;\n    }\n  }\n}","map":{"version":3,"names":["ENV","User","baseApi","BASE_API","getMe","accessToken","url","API_ROUTES","USER_ME","params","method","headers","response","fetch","result","json","status","error","createUser","data","formData","FormData","Object","keys","forEach","key","append","fileAvatar","USER","Authorization","body","getUsers","active","undefined","USERS","deleteUser","iduser","updateUser","userData","password"],"sources":["C:/Treinamentos-LOCAL/2022-MERN-AN/Web-MERN/client/src/api/user.js"],"sourcesContent":["import { ENV } from \"../utils\";\n\nexport class User {\n\n    baseApi = ENV.BASE_API;\n\n    async getMe(accessToken) {\n        try {\n            const url = `${this.baseApi}/${ENV.API_ROUTES.USER_ME}`;\n            const params = {\n                method: \"GET\",\n                headers: {\n                    \"Authorization\": `Bearer ${accessToken}`,\n                },\n            };\n\n            const response = await fetch(url, params);\n            const result = await response.json();\n\n            //console.log(response);\n            if (response.status !== 200) throw result;\n\n            return result;\n        } catch (error) {\n            throw error;\n        }\n    }\n\n    async createUser(accessToken, data){\n        try {\n           const formData = new FormData();\n           Object.keys(data).forEach((key) => {\n               formData.append(key, data[key]);\n               //console.log(key);\n           });\n\n            //console.log(data.fileAvatar);\n           if(data.fileAvatar){\n                formData.append(\"avatar\", data.fileAvatar);\n           }\n\n           //console.log(data);\n\n           const url = `${this.baseApi}/${ENV.API_ROUTES.USER}`;\n           const params = {\n                method: \"POST\",\n                headers: {\n                    Authorization: `Bearer ${accessToken}`,\n                },\n                body: formData,\n           };\n\n           const response = await fetch(url, params);\n\n           const result = await response.json();\n\n           if(response.status !== 201) throw result;\n\n           return result;\n\n\n        } catch (error) {\n            throw error;\n        }\n    }\n\n    async getUsers(accessToken, active = undefined) {\n        try {\n            const url = `${this.baseApi}/${ENV.API_ROUTES.USERS}?active=${active}`;\n            const params = {\n                method: \"GET\",\n                headers: {\n                    \"Authorization\": `Bearer ${accessToken}`,\n                },\n            };\n\n            const response = await fetch(url, params);\n            const result = await response.json();\n\n            if (response.status !== 200) throw result;\n\n            return result;\n        } catch (error) {\n            throw error;\n        }\n    }\n\n    async deleteUser(accessToken, iduser){\n        try {\n           const url = `${this.baseApi}/${ENV.API_ROUTES.USER}/${iduser}`;\n           const params = {\n                method: \"DELETE\",\n                headers: {\n                    Authorization: `Bearer ${accessToken}`,\n                },\n           };\n\n           const response = await fetch(url, params);\n           const result = await response.json();\n\n           if(response.status !== 200) throw result;\n\n           return result;\n        } catch (error) {\n            throw error;\n        }\n    }\n\n    async updateUser(accessToken, iduser, userData){\n        try {\n            const data = userData;\n            if(!data.password) delete data.password;  //se campo password n達o tem valor, delete o campo todo, n達o envie nada\n\n           const formData = new FormData();\n           Object.keys(data).forEach((key) => {\n               formData.append(key, data[key]);\n               //console.log(key);\n           });\n\n            //console.log(data.fileAvatar);\n           if(data.fileAvatar){\n                formData.append(\"avatar\", data.fileAvatar);\n           }\n\n           //console.log(data);\n\n           const url = `${this.baseApi}/${ENV.API_ROUTES.USER}/${iduser}`;\n           const params = {\n                method: \"PATCH\",\n                headers: {\n                    Authorization: `Bearer ${accessToken}`,\n                },\n                body: formData,\n           };\n\n           const response = await fetch(url, params);\n           const result = await response.json();\n\n           if(response.status !== 200) throw result;\n\n           return result;\n        } catch (error) {\n            throw error;\n        }\n    }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}